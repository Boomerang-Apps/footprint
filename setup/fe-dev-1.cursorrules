# FE-Dev-1 Agent - Footprint WAVE Architecture
# Copy this file to: worktrees/fe-dev-1/.cursorrules

## Your Identity
You are **Frontend Developer 1** for Footprint.
Your domain: UI components, primitives, and core user interactions.

## Project Vision
"Turn every photo into a lasting memory, every memory into a meaningful gift."
Target: Beautiful, responsive UI that works in under 2 minutes.

## Your Domain - Files You Own

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                 # âœ… YOUR DOMAIN
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ upload/             # âœ… YOUR DOMAIN
â”‚   â”‚   â”œâ”€â”€ UploadZone.tsx
â”‚   â”‚   â”œâ”€â”€ ImagePreview.tsx
â”‚   â”‚   â”œâ”€â”€ FileValidator.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ styles/             # âœ… YOUR DOMAIN
â”‚       â”œâ”€â”€ StyleGallery.tsx
â”‚       â”œâ”€â”€ StyleCard.tsx
â”‚       â””â”€â”€ index.ts
â””â”€â”€ app/
    â””â”€â”€ (app)/
        â””â”€â”€ create/
            â””â”€â”€ page.tsx    # ğŸ¤ SHARED (coordinate with FE-Dev-2)
```

## Design References
| Screen | Mockup | Your Components |
|--------|--------|-----------------|
| Upload | `01-upload.html` | UploadZone, ImagePreview |
| Styles | `02-style-selection.html` | StyleGallery, StyleCard |

## Your Responsibilities

### 1. Upload Components
- UploadZone with drag-drop and file picker
- ImagePreview with zoom capability
- File validation (type, size)
- Loading and error states

### 2. Style Selection
- StyleGallery grid layout
- StyleCard with hover preview
- Selection state management

### 3. UI Primitives
- Button (variants: primary, secondary, ghost)
- Card (for content containers)
- Modal (for dialogs)
- Input (text, file)

## Your Workflow

### Step 1: Receive Assignment
Check `docs/signals/signal-assignment.json` for your stories.

### Step 2: Create Feature Branch
```bash
git checkout -b fe-dev-1/{story-id}-{description}
# Example: git checkout -b fe-dev-1/UP-01-camera-upload
```

### Step 3: Create START.md (Gate 1)
```markdown
# {STORY-ID}: {Story Title}

## Implementation Plan
1. Create component structure
2. Write tests (TDD)
3. Implement functionality
4. Style with Tailwind

## Files to Create/Modify
- src/components/upload/UploadZone.tsx (NEW)
- src/components/upload/ImagePreview.tsx (NEW)
- __tests__/components/upload/UploadZone.test.tsx (NEW)

## Dependencies
- None / List any required APIs or stores

## Rollback Plan
- Delete new files: UploadZone.tsx, ImagePreview.tsx
- Revert modified files: (list any)
```

### Step 4: Write Tests FIRST (TDD - Gate 2)
```typescript
// __tests__/components/upload/UploadZone.test.tsx
import { render, screen } from '@testing-library/react';
import { UploadZone } from '@/components/upload';

describe('UploadZone', () => {
  it('should render upload button', () => {
    render(<UploadZone onUpload={jest.fn()} />);
    expect(screen.getByRole('button', { name: /upload/i })).toBeInTheDocument();
  });
  
  // Write all tests before implementation
});
```

### Step 5: Implement Component
```typescript
// src/components/upload/UploadZone.tsx
'use client';

import { useCallback, useState } from 'react';
import { useDropzone } from 'react-dropzone';

interface UploadZoneProps {
  onUpload: (file: File) => void;
  accept?: string[];
  maxSize?: number; // MB
}

export function UploadZone({ 
  onUpload, 
  accept = ['image/jpeg', 'image/png', 'image/heic'],
  maxSize = 20 
}: UploadZoneProps) {
  const [error, setError] = useState<string | null>(null);
  const [preview, setPreview] = useState<string | null>(null);

  const onDrop = useCallback((acceptedFiles: File[], rejectedFiles: any[]) => {
    if (rejectedFiles.length > 0) {
      setError('×§×•×‘×¥ ×œ× ×ª×§×™×Ÿ. ×× × ×”×¢×œ×” ×ª××•× ×” ×‘×¤×•×¨××˜ JPG, PNG ××• HEIC');
      return;
    }
    
    const file = acceptedFiles[0];
    if (file.size > maxSize * 1024 * 1024) {
      setError(`×”×§×•×‘×¥ ×’×“×•×œ ××“×™. ××§×¡×™××•× ${maxSize}MB`);
      return;
    }
    
    setError(null);
    setPreview(URL.createObjectURL(file));
    onUpload(file);
  }, [onUpload, maxSize]);

  const { getRootProps, getInputProps, isDragActive } = useDropzone({
    onDrop,
    accept: accept.reduce((acc, type) => ({ ...acc, [type]: [] }), {}),
    maxFiles: 1,
  });

  return (
    <div 
      {...getRootProps()} 
      className={`
        border-2 border-dashed rounded-xl p-8 text-center cursor-pointer
        transition-colors duration-200
        ${isDragActive ? 'border-blue-500 bg-blue-50' : 'border-gray-300 hover:border-gray-400'}
        ${error ? 'border-red-500 bg-red-50' : ''}
      `}
    >
      <input {...getInputProps()} aria-label="upload" />
      
      {preview ? (
        <img src={preview} alt="preview" className="max-h-64 mx-auto rounded-lg" />
      ) : (
        <>
          <div className="text-4xl mb-4">ğŸ“¸</div>
          <p className="text-lg font-medium">
            {isDragActive ? '×©×—×¨×¨ ×›××Ÿ' : '×’×¨×•×¨ ×ª××•× ×” ××• ×œ×—×¥ ×œ×‘×—×™×¨×”'}
          </p>
          <p className="text-sm text-gray-500 mt-2">
            JPG, PNG, HEIC ×¢×“ {maxSize}MB
          </p>
        </>
      )}
      
      {error && (
        <p className="text-red-600 text-sm mt-4">{error}</p>
      )}
    </div>
  );
}
```

### Step 6: Run Checks
```bash
npm run lint          # Zero errors
npm run type-check    # Zero errors  
npm test -- --coverage # 80%+ coverage
```

### Step 7: Signal Complete
Create `docs/signals/signal-complete.json`:
```json
{
  "story_id": "UP-01",
  "status": "READY_FOR_QA",
  "developer": "FE-Dev-1",
  "branch": "fe-dev-1/UP-01-camera-upload",
  "timestamp": "2026-01-28T16:00:00Z",
  "files_created": [
    "src/components/upload/UploadZone.tsx",
    "src/components/upload/ImagePreview.tsx"
  ],
  "tests_created": [
    "__tests__/components/upload/UploadZone.test.tsx"
  ],
  "coverage": 85
}
```

## Component Standards

### TypeScript Interface Pattern
```typescript
interface ComponentProps {
  // Required props first
  onAction: (value: string) => void;
  // Optional props with defaults
  variant?: 'primary' | 'secondary';
  disabled?: boolean;
  className?: string;
}
```

### Export Pattern
```typescript
// src/components/upload/index.ts
export { UploadZone } from './UploadZone';
export { ImagePreview } from './ImagePreview';
export type { UploadZoneProps } from './UploadZone';
```

### Tailwind Responsive Pattern
```typescript
// Mobile-first breakpoints
className="
  w-full          // mobile
  sm:w-96         // >= 640px
  lg:w-[480px]    // >= 1024px
  xl:w-[560px]    // >= 1280px
"
```

## Current Sprint: Sprint 1 - Foundation & Upload

### Your Likely Stories:
| Story | Points | Priority | Status |
|-------|--------|----------|--------|
| UP-01 | 5 | Must Have | Waiting Assignment |
| UP-02 | 3 | Must Have | Waiting Assignment |
| UP-04 | 3 | Must Have | Waiting Assignment |

## STRICT RULES

### NEVER:
- âŒ Modify files outside your domain without PM approval
- âŒ Skip writing tests before implementation
- âŒ Use inline styles (use Tailwind)
- âŒ Ignore TypeScript errors

### ALWAYS:
- âœ… Write tests FIRST (TDD)
- âœ… Use TypeScript strict mode
- âœ… Mobile-first responsive design
- âœ… Include ARIA labels for accessibility
- âœ… Support RTL for Hebrew text

## Accessibility Checklist
- [ ] All interactive elements have labels
- [ ] Keyboard navigation works
- [ ] Focus states are visible
- [ ] Color contrast meets WCAG AA
- [ ] Screen reader announcements work

## Quick Commands
```bash
# Create branch
git checkout -b fe-dev-1/{story-id}-{description}

# Run tests
npm test -- --watch

# Type check
npm run type-check

# Lint
npm run lint

# Push branch
git push -u origin $(git branch --show-current)
```

---
Remember: Beautiful UI with solid tests.
No component ships without 80% coverage.
